# خطوات وضع المشروع على الاستضافة (LibyanSpider)

اتبع الخطوات بالترتيب حتى يشتغل الموقع على الرابط العام.

---

## 1. ربط المستودع (إن لم يكن مربوطاً)

- **Deployments** أو **Edit Project** → **Repository:** `admin-dashboard`
- **Branch:** `main` (أو `master` إذا غيّرته على GitHub)

---

## 2. Post-deploy: تشغيل npm install في مجلد المشروع

الخطأ السابق كان: `npm install` يُنفَّذ من `/home/jelastic/` ولا يجد `package.json`.

- في **Edit Project** → **Hooks** → **Post**
- **لا تكتب فقط** `npm install`

### جرّب هذا أولاً (يجرّب عدة مسارات تلقائياً)

انسخ السطر التالي كاملاً في حقل **Post**:

```bash
for d in /var/www/webroot/ROOT /var/www/webroot /home/jelastic/ROOT /opt/repo/ROOT "$DOCROOT" .; do [ -f "$d/package.json" ] && cd "$d" && npm install && exit 0; done; exit 1
```

إذا لم يقبل السطر الطويل، جرّب المسارات يدوياً واحداً واحداً:

```bash
cd /var/www/webroot/ROOT && npm install
```

إذا ظهر خطأ، جرّب:

```bash
cd $DOCROOT && npm install
```

أو:

```bash
cd ~/ROOT && npm install
```

- احفظ (Apply) ثم اضغط **Deploy**.

**كيف تعرف المسار الصحيح؟**  
من **دعم LibyanSpider** اسأل: «ما المسار الذي توضع فيه ملفات التطبيق بعد النشر من Git؟» واستخدمه في مكان `ROOT` أو `$DOCROOT`.

---

## 3. أمر التشغيل (Start)

- في إعدادات **Application Server (Node.js)** أو **Deployments**
- **Start command** أو **Run command:**  
  `npm start`  
  أو:  
  `node server.js`

---

## 4. (اختياري) Git-Push-Deploy Add-On

إذا استخدمت الإضافة:
- **Git Repo Url:** `https://github.com/almuetamadsert-spec/admin-dashboard.git`
- **Branch:** `main` أو `master` حسب فرعك على GitHub
- **User:** اسم مستخدم GitHub
- **Token:** Personal Access Token من GitHub (صلاحية repo)

---

## 5. بعد النشر

1. انتظر 1–2 دقيقة.
2. افتح **فحص التوصيل:**  
   https://env-6069530.tip2.libyanspider.cloud/status  
   يجب أن ترى: السيرفر يعمل ✓، قاعدة البيانات متصل ✓.
3. افتح لوحة التحكم:  
   https://env-6069530.tip2.libyanspider.cloud/admin/login  
   (admin / admin123 — غيّر كلمة المرور بعد أول دخول.)

---

## 6. إذا استمر الخطأ

- راجع **Logs** لخادم Node.js وابحث عن رسائل مثل `Cannot find module` أو `ENOENT` أو `package.json`.
- إذا ظهر مسار في اللوج (مثل `/var/www/webroot/ROOT`)، استخدم **نفس المسار** في أمر الـ Post:  
  `cd <المسار> && npm install`
- يمكنك أيضاً إرسال آخر 20–30 سطراً من الـ Logs لدعم LibyanSpider أو لمتابعة التشخيص.
